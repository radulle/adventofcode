document.body.innerHTML = "";
document.body.style.backgroundColor = "#2e3440";
const c = document.createElement("canvas");
document.body.appendChild(c);
const ctx = c.getContext("2d");
c.width = window.innerWidth;
c.height = window.innerHeight;
var font_size = 6;
ctx.font = font_size + "px courier";
ctx.shadowColor = "#a2bf89";

async function animate(WAIT = 10) {
  let grid =
    `>.>vv.....v.v.vvvv..>..>>....v.>>>>>v.>..>v.vv......vv>>.>.>.>v.>..>>.v>..vv.>>.>..v.>>..vvv.>.>>v.>>.>v.v..v.v.>....>..>....>.v>>>.>>..v..
..>v..>..>vv..vv.v..>>..v...vv..>.v>vv...>.>vvv>>>>>....v>v..v......v>.v..vv>.>.v..>...v>v.v.>.vv>..>v......vv>>vv>..v.v>vv.>v.>..vvvvv.>v>
>>.>v....>>vv.vv...v..>.....v.>>..>.v>>>v..>vv..>>..v.v..v.>.v>..v.v>...v..v>..v>>.vv.v>>>>.>...v.v.v>.vvv.v.vv.v..vv>....v.....v.....v.>>.
v...>.>v>v>>..v..>..v.>v>vv>.v.v.....>v..>.>....>....>vv.vv.>....>vvv>..vv....>>>...v....v.v..>....>..vv>.>>.vvv>v>v.vv.>.....v>..v...>v.>v
..>.......>vv.v..vvv>.vv.v.v.v>.>v>>.....v.v.v>.....v.v.vvv>..v...>v>>.......>>>vvv>>.>....vvvv>>v>>.v.v.>..v.v>..v.v>....>..>v......v>v.>.
>vvv.v..v>vv.v......v..>.vv...v........>.>.>..v>.>>...v.vv>..>v.v>.>.v.v.>>.>>..>.>>.v>.v..>>..>vvv..>>.v.vv.>v.>v...v>.v..v.vv..v...>v..>.
v...>v>>..v..>>v>vv.>>..>>v.v>.>v>.>..vvvv>.>>v.vv.>..v.>...vv..v.>.>v...>v.v>..v.vv>..>>......vvv>..>>>>vv>......v.>.>>>>>>>.v.>..v.>..>v>
.v>.>.>vv>>.>>...v>v>>.v>.>.v..vv>v.>v>v>v.>....vv>.>.v>.v....vv..>..v..v.v>.>...>..v.v....>.vvv.vv..v>v....vv...v...v..>.>.....vvv>vv..v..
.....vv.vv.v..v>.>v..>>.v.>..v.v....>>v..>.v...>..v.>.v.v>.>..>....>>.....>vv.v..vv>v.>>...>.......v.>.vv...v.>..>.....>>v.>vv....>..vv.>.>
.vv.v.v>.>.v...>.v..>.vv.....v.>.v>.>v>>...v>.v>.>v>>......>.>>v>..v>.>v>.......>.>...>v..>...>..>.>.>>v.v..>..>..v>>.v.v..>>v.>.>>>>....>v
vv...v>>.vv>...v.vv..>......v>.>>v.>>vv.>>vv..vv.v...v.>>>v>.v.>>v.v..vv>vv.>....>>>v>>v.......v..>.......v.>..>....v..v..>.>v....v...vvv..
....>>.v>v........>>..v..v...>..v...>v..v>>...v.>.v.>>>.......v.>>v.v>>.v.v..>v.>..>..>>..>.vvv>...>>>v.v...v.>..>>v.>>>v.>..v>...v...v..>.
.>.>.>>..>>.....vv..>v...vv.v....vv..v.v>v....>.v.>>....>.v.>.>.v.....vv..v.>.....>>>.>>.vv.v>...vv..>.>>v....>.>.>.v..vv.v>.>>...>>v..v.>.
>..>.>..>v.v....>.....v>v....>.v..vv.v>......>v..v...v.>v.v.>.>>.vvvvv..>>>.v>.>...v...v...>.vv>..>..>.>..>..v>>>>v>.....v.v..>>vv.vvv..vv.
.>>>.>.v>>v>v>>v>.>.....v>>v>>v>..>.>>.>...>>.>.vvv....vv....>vvv>..v..>.>.>vvvv.>vv...>...>>>>.v.>..vv..v.v..v.>..v.v>.v.>..>..v>.....>>.v
.v>.v.vv.v>...>vv>..>vvv.>vv..>.vv..v.v..v>..>..>v>>>.....>>..vvvv>vv......>..>..vv>v.>v.v.v..v..v>v>>.>....v>.>.v..v.>>.v>..>v.vv..>..v.vv
..v>v.v....v.v.v....v>.>...v.>.>v.vv>v....v.>...>>v.v>.>>.v...v>>v.>>v.v.>v.>vv.>.v..v>>..>.v.>>..vv>..vv>.v>.....>..vv.v...v>.>.vv.>>v.>.>
.v.>.>>..>>.v>v...>>..v.>.v..>.v>>v>>.v>v>.>.....>>...>..>v>>........v..>>.v..>..>v>..v.v.>..v>.>..>..v.v.v.>>v.vvv..>>>>>>.........v.v..v.
>>..vv...>....>...vv.v.>..v.v.v>>v>.>..>.v...v...v...vvv..v>.....>>v..>.>...>...v>.>v...v...>v....>>v...vv........>....v>......>.v.>..>.>..
..>v.v....>>.>..v.>>.>.v>..>v.vvv..>.>..v..>..v.v..v......v....>v.>vv..v.>.vv..>>>.>.>.>>.....vv..v...>>v.>v.v.vv.vvv>..v..v.vv>vvv>vv>....
.>>v.vv...vv.>v>vv.>...v.v.>v..>.>>.v.>>..v...>v.>v..>>.v...v.>v.v..vv>>>...>>..>.v..v>..vv.v...v.>vv.>>>.vvv...>v...v.....vvv.....vvvv.v.>
.v>.vv>>.>.vv.>>.>.>....v...v..v>.>.vv>.v..v..>v>..>>>v.v..vv....>..>v..vv.>..>..vv>..v...v..v.....>>.>..v.>v.v.v..v..v..vvv.v...>....>>v.v
v>....v.v>....>..>v.v...>>v..>v>.vvv..v..v.v>>.v..>.vvv..v.v..>>>>v>v...v..>...v..vvv>.>>>vv>>v..>.>.v.>......>..v>.v>>v>v.>..v.>>.v.v.....
.>..v>v.>v..v>>.>....>vv>v.vv>.vv.>v...v.>.>...vvv..>>..>vvv......>>>.v.v..v...>..>vvvv.>.>>.v.v>>.vv.>>v..>v>v>..>v...v.v>>.>>....v.v.>.>.
...>..>.v.>.>.v...vv>.v.....v.v..>v>v..v.>.>..>..>.>..v.v.v.>.v.>v..>.vv.v>>.v>...>.>v.....vv..v>v..v........v.v..vv>vv.>vv>v.v.....vv..vv>
.......vv>v...>>v...>v..>v..>.>>v.>>.>>v.v>..v.vv..>>>.>..>..>v.>v...>>>v..v.v>v.v.>.v.vv.v.v..vvvv.vv.vv>>>>....>.>.>...>..v...>v>..vvv..v
.v....v.vv.>v.>.v.>>.v.>..........v>...>>>>....v>....>>v...v....v...v>vv.....>v.>.vv>>>..v>vvv>..>.vv..>...v.v..>.>...v..v.>vv..v.>vvv>>v.v
..>>vv.v.>.....v>...>v..>..>.>.v........v>..v>>..v....v.v.v....>v>vv>..v...v.>.v>...>.>>.vv....v...v>v.v>vv....>v>v.>..vv>.>.v..>v>>v>vv...
...>v>>>..........>..vv..>>.v...>..>>........v..v.v>..>.vv.>vvv..>vv..>v.v...v..vvvv.>.v>..vv>.v..>v>>.>.>>v>>vv..v>>>.vvvv..>.v.v.........
.>.>>v>v>v>.>..v.>v.>.vv...>......>.>v....vv>.>..>.>.v..v..>v.>>.v..v.>....vv.v>.v.>....>>.>>.v>.v>v.vvv....>.>..v>.v.vv.>>......>.>.>...v.
v..>..>>>.v.>.>>.>v>>.vv>.>v..vv.v..>....v.v.>v...>..vv..v>v>.>>...v>..>v.v.v>>>v.>.>.vv>.v>..vv...>v...v>...>v>v>.v>v....v>vv...v.>>>>>.v.
.v.>.v...>..vv>......>>..>v.v.....v>.v...>...v.v..v>.....v.v.v>>>>....v..>.....>.vv>.>v...v>.v.>>.>vvv>v.>.v.vv>...>..>.>.vv>v....>v.>..v..
>..>.>v.>v..>.>v>..>....>vv.v>v.v..>v..v.v.vvv.>v.vv.v>.v...>...v.......>v.......>v>v.v.>...>.......v>v.v...>vv.v>.v>v>..>>>.>>.vvv..>>v...
.v>>>v....vvv.>v.>.>>v>v...>.v.v.....v>.....>.>>v.>>vv..>.v.vvv....>>v.>v>.v>vvv>>>..>>.v.vv>v>.....>>.v.v.>....v...>..v>.>vv.>.v.v...v.>..
....>>...v..>>v...>>>.>.>>..v>.vv....v....>>.>.>..>...vv..>>v.>.v..v.vv.v..vv.>>.v...>>.>.>....>.>vvv.....v....>>v.>....vv..v..>.>v>.>...v.
.vv.>.>v...vvv....v....v.>..>.v>>.>.v...>.>>.vvv...>.v.>...v.vv..v>>.>..v.>..>...v..v..v.v>v.vv.>v>.v>.v>v...>>.>>>v>>>..v.v..>..>.v>.v.>v.
>v..v..v.vv.>vv.v..>.>v..v.v.>..v....v.v>.v...v>.>>vvvv>.vv.v>..v.>v>.>v>>.v>>>>.vv..>vv>v..>>...v..v....v..v>...>...vv.v>...>v...>.>..v.v.
>>.v.>v>.vv..vvv......v>>..>>.vv.vv>.v...>>.>.>.v>v..>>v>>.>....>.v.v.v>....v.v>>..>..v>......>.>.v>.v..v>....>v....v.vv...v>vv>.v....>v.>>
>v...>>.>.>v>v...>....>.vv....v..v>.....vv..>vv>v....>.>..vv..vv.v.v>>.>.vv>vvv>..vv..>.>.vv..v..>.>v.>.v.>>>..>>..>>>>.vvv...>.>....v.v..v
>.>.>..vv.v..v>v.>.>>>v>v>..v..>...>>..>vv>v..v>v.vv>>>..vv.>.>vvv>.v....>...v.>v>.>....>vv>...v>>vv.v..v.>.v>..vvv>>.>v>.....>>>..v.>.v.vv
vvvv>v..v>v.>vv.>.v..v..>.>....v.v....>v>.v>.>.>...>v..>v...vvv..v.v...>>..>..>>>...v>>>.>.v.>.>...>..>.v.>v..vvvvv.>v>>.v>..v.>v..vv>..>>>
...>v>.>v...>>>vv..>vv.v.v..vvv....>..>.>.v>>vv...>....v.v>.v.>..v.>.>>...v...v>v>>.....v>>vv...v..>...v.>...>v>....vvv.v....vv.>...>..vv..
......v..>..v>v.v....>.v.v>..v>..>v...vvv.v.v.>>vv.....>..v.v.v....>v.>v....>.>..>>.>...v...>...v..>v>>>.>.vv..>vv>.>v.....>..v.>>..v>..v..
.>v.>...vvv>..v..v..>...>.>>.>..>v.>..v>....v>>v..v.vv....v..vv......v>>>..v>v>.>...>v>>v>.v.v>.vvvv..v...v..>>..>>>...>..>>>>...v..v>v.v.v
..v..>v.....vv.v....v.vv.>.vv>.v>>.v.>v>v.vv..v.vv.>.....v.>.vv.>.>..v...v.v.vv.>v...v>.>>.>.>.>.>...>..vv.v..v.v.>v..>v...vv>v.v..>.v.v>.>
...v..v>>>...vv>vv.v.>...v>>.>.>v>>v.v>vv>v>......>.....v..v..v>>>v..>>.>>v.>v..vv......>.....vvvv.v>.>.vv...>...v...v>...v..v>v.vv.v>..>>v
v.>vv>>v.v.v.>v...v.....v.>>..v.>>v>>.v.........v..vvv..>...>.>>.>v...>>.v.v.>>..>v>v..v...vv>.>>..v.>.>v.v.>>>.vv.vv.v.>.v.>>>..>>..v>>.>.
....>.....vv...v.>.v>>>>.......v....>>>>>..>....v...>....v>....>v..>>..v.>.>...v>v........>.>v..v>.v>>..vv>>>v>...vv.>..>>v.v..v.v.>..v>vv.
>>v.vv..vv..>>.>.v..vvv.v>...>>.>>.>v.v...>v......vv..vv....v...>v..>..v.v>.vv>>......v.>.v>v.v.>>v>v>.v.vv....v...v.v.>....>v>>v....>v..v>
v...>v.>.v>v>.vv...>...v.v.>.>>>v.>>...>>>v>..v.v...v.vv..v>.....>...>.>.v.>...>.>...>..vv..>>>vv>.v>v.>>..v>v>.vv..>v....vvvv.>.>>..>..v..
..v..>>.vv>.>v.>.v.>..>..>>v>v..v>>>...v>v>>v.>>..v.>v>>v...v..>v.v>.>.>>.>..v.v>v>.v...>v...>v>>...v.v>v..vv.....v>..>v..v......vvv.....>>
.....>..>.....>...>v..>..>..v..>...v..v..vvv..vv>v>...v>........>..v..>..>v.>vv>...>..vvv>.>>>.....v.>>.v>.v>.>..v>>.>..v..vv>>.v.vv.>...>v
>>.v>v.>>.>>v>>.vv.v.>.>.v..>vvv..vv..vv>v>.v..v..>>.v>..v...vv..vvvv>.v..>.>vv>.v>v>>.....v>v>>..>...>...v...v>>v.>..>..vv.v>....v>..vv...
....>>.>..v..vv.v....>.v>.v>v>..>v>>.v>>v.vv.v.v>>vv>>>>.>v>.>.v..>v.>vv>>..>..v>>v..>>.>..vv>>>.>..>.v>v>..v.vv...>>..vvv...>>.>.vv.v>v.>>
.v.vv>.v...>.>>>.>...v.v>>>.>...>>..>>.vv..v...v>..>v>..vvv>.>.....>v.v.vv.v>>>.>..vv.v.v..v.>>.vvvv>.>v>.>v..>..>vv.>>.....v.>v..v.vv.v>..
..v..v....v...>.vv..v..>......>>>>v.v..v.vv>......vv>..>v.v>...>.>v...>>.>>v.v.>>.>.>.>..>>..v....v>.>>>vv>......v.......vv.>...v.>...>v...
.>.vvv.v....>vv.>>>...vv>v.vv.v>>>>.v.>v.v....v>..>.v.>>vv.>vv....>.......>...v.>>v.v.>>.>.>vv.vv...v>..v>>>......>>.v.>v.v.>.>..v.>.>....v
.>..v...>>>>.>..v...>>.vvvv.>v>.....>>vv...v....>.>>.vv>.v..vvvv....v........>v.v....>vv.v.>..v>..v...>.>..>v.vv>.v..vv.>..>.vv.>.v...>.>>v
v>..vv>..>..vv>..>v..v>vvv..>v>v.v.....v.>vv.>...>.>v.v>>..>v..v.v...v>.....v.>..>>v.v..>>>...>...vvv...>.....v>.......>vv.>..vv.>.>.v>v>v>
...v>v>.>.v.>..>....v..>.v.v>v.vv.>.v..>>..v.vv>v>....v>>.>>.v>.v....>>vv.v.v>.v.>.v>v.>.>.v..>>v..>>.v>v>>.v.>v.>..vvv.>....>>>v.>..>v.>..
..v.v..v..>..v>>...>...>>.v>.vv.>...v.vv>.>..v.>v...v..v.>...v.v...>.v.>>...>>..>.v..>>.v>v....>.>.>>vv....vv...v..>>.>>.>>vv.....>v.....v.
>.>>.v..>>.vv.v>>.vvv>....v.....v..>....>>.v.v>vv>>..>v...>.v>.v.v.>.v.>>..>>...vv>.>>.>.v.>..>v.v.>.>v.v>>v>..>.v>v.>vv.>v>.>.vvv.>.>...>.
v.v.v..vvv..>..vvv..v....v....>.v....v..>..>.>v...v.vv>.>v..v.v>>.v.>>>>.v>.>....v..v>vv..v.v>..vv.v.v..>v...v.v.>..>..v..>>>...>..v.v.v.>v
.>..>....>v.v..vv..>.v.v>...v.vvv.>...>.vv>.vv...........vv.vv.>..vv...>vv.v.vv>v..>v..>.v.>...>.v>.v.....v>.>>>.v>vv....>>v..v>.v..>v..>.>
..v>.......>.>.vv>>.>.vv>.vv...>>v.>.>v>.v>>.vv.vv.v>>..v>..>.v.v.>vvv.>vv...v>...>..vv...v>v>.v>.>...>>>.>.v>v>>v.>.v>......>.>.v>....v...
.vv.v>.v...>vv.v..>...v..>..>>.vv....>v>>>v>v...>.v>>..>..v..v.>>v>..>>v..>..>v.>..>v.v.>.v.vv>.>.vv.>vv..v..>..>vv.....>>...>...>v>>.v..>.
.>.>..vv>>v>.v..v>..v>>>.>..>.>v..>..v...vv.....v..vvv.>.>.vv..v.vvvvvvv..v>>>.v...>......v..vvv.v.>>.....>.>.v......>.>>>..v>.>>>...>..>>v
>vv.>...>vv>v>.v.>>v...>....>>..>>.v..v>vv...>>>>....vv.vv>.vv>...v.>>....>>>>.....>v.vv.vv..>.vv....v.v>vvvv..vv..>...v>v.>vv.v......>v>>.
>>v.>>..v.>>.v.>.>.v.v...>.>>v..>.>>v..>>>.>..>>...>>.>...v>v..vv>...v.>..v..>...>v...>v>.v>>v>.>.v..v...v.v>.v>...vv..v>vv..vv>.v.......v.
..vv....v....v.>v....>..v.>.v.>..vv>v>.vvv.....>........>>v>vv>..v....v.v>...>.vv>.v.>vv.....v.v>vv>>v>.v>...>..>.>vv.>>>>>v>.>.v..v..v..>v
v.......>..vvv.>..>>v>......>v>v...vv..v..>v...v>>vv>.>.>...v...v>>vv.>.>>..vv.>>vv...v>v.v.>v.v......>......>>v>...>>>.>v.....vv>...>>.v..
v.v>>vv>.>v>.v.>v.v....v.>v>v..vv....v..v>.>>>.>v...v>.....v.>v...>vvv>>.>v...>..>...vv>>>>....>.v.>vvv.....v..>.v.>v>.v.....v>v>.>.vvv>>>v
.v>>..v.v.v.v.vv...v.>.v.vv.vvv>>.v>>>.v.v>v>.vv.>>v>v.>..>v.....v.......>.>.vv.>...>v.v...v...>.>.>...>>v.v..>>.vv..>...vvvv.>.v>..v..vv..
..v....>vv.>>v>>..>v..>v.>v>.v>>v.>.v.>>.>.....>..>..v..v..>..>vv........vv.>v>.v...v.>.>...v..v.v.>>...v>v.v..v.v>.>>...v>.>.v..v.>..v>...
vvvv...>..v.>>..v..>>.v.>>.v..v>.>vv>..>v>>>..v>....>..>.v>>>>.....vv>v..>..>v>vv.v.>v>..>vv.vv...v.v.vv.v>.v.vvv>..>.vv.v..vvv..>v>v.v.v..
.>vv.>v..v>..v>...v.v>...>.>v..v>...vvv....v...v..>>>....>..vv>....>.>.vv.>.....v.>.>....>>.>.vvvv>.>.>.>..>>>....>.vv...>>..v>.>.v.....v>.
vv>>..v>.....v>.v.v.........>.>.>...v>>.v......v>..v>..v.vvv..v...v.vv>v...>v>>v>.v....vv.>>.>v>...>.>v.>..vv......v..>v.>vv..v.v..v...vv..
>v.>..v>...>v.v>.v.vv..>....>..>.v..>>>v>>..>..>v.>v..>>..v....vv..>.>>>>>.v.>vvv.....v.>>>.v.v..>.v.v.v..>>v.>>vv>>....vv...vv>>.v.v.>vv.>
v>>.v.>....>>..v>>.>.>.......v..vv...>...vv.v>>>>v>...v>vv...vv...>....>>>.>..>.v.v.>>.v.v>vv..v>..vvv.>...>...v.v..v>v>.>.....vvv..v>.v.>.
..>.>v>>>..>v...>>v.v.v..v.v>>.v>..>.v>v>.>...v.>..>.v.>>.vvv>.>>>.>...>v.v...v.>....v...vv.v>..>.>..v.>.>.v.>.v.v..>>....>v>..>.v>..v.vv.>
vv.>>v.v>>vvv.....v.v>..>v>.vv.>>vv>....v....v..v.>>.>vv>..v.vv....v...v>>>.vvv..v>>.>v>>v.v...v.>>>>v>>.v.>>vvv..v.vvv.vv...>>..>>..v.>.v.
v....v.v>>.>v..>.....v.v>...vv...v.....v>>v..>vv>...>v...vv..>>v.>>.vv..v>.>>..>>.v..v....>>.v.>>.....v.>>...v..>v>vv...>>>.v>..>.v.vv.>v>v
........vv>>vv.>v.>...v.>v.>>.>........vv..>.>..>>>.v.>v..>.>>.v.>..>v...>.v>>.>..>v>.v.v.v.>...>.vv.v.>>.>vv..>...v>vvv>.>..vv.>v.>v.>..v>
.v>>vv.>>>.>..v>v>v....>.....>>>.>>.....>v>.v.>v>>vv>..>...>>v.vv>vv>v..v>>>v..>v..vv...vvv.....v.v>v..>v..>v..v>>v>.v>..>.v...vvv.>.v.v.>>
.v>>>.v..vv.....v>v....>v...vv..v.>>.>.>..v.>...v...v..v>.>v.>>v.vv....v>v.v....>.>>>...>..vvvv>.v..>.>>.>vvv..>.......>v>v..>....>..vv>.v.
>.....v..vvv.v.>>>..>v>>vv>.>..v.>>.v......>vv.v>.vvv>vv..vv>...v...vvv.>>....vv>>.v>vv>.....>v.>..v..v..>>.......v.>v..>v..v....>>v..v.v.v
>.>vv>.>.>v.....v>>....>.>v>>vv.v>vv..>>>>>.>.v...>>v...>.vv.>vv.v>....>......vv.v.>......v>v....v.....>..>>.v.>.>>>v.>.v>v>..>.v..v>>v>vvv
...>.>.>.v>.>v.>....v..>..>..>.>..v>vvv.>...>>>.v..v...v..>>vv>.v.v..v>>.>...v>.v......v.v>>vv..v.v.vvv...vv>v.>.>>v....vv.v..>>.v.vvv>v.>>
>>.v.>v...>..vv>>v.>...>...>...>v.v.....v..>..v>v...>.>..>.>..vv...>..>v..>>>>>....>.>v.>..v..>.>v>v.v...v>>......vv..>.v..>.>.>.....>v>v.>
v>.v....v..>v.v.>>....v....>....>>.v>..>.v..>.>..v>>.v..>>..v..v>>v>v.vv...>>...vv.v.>.>>.>.....>..v.v...>.v.vv..v.v.vvv>.>.>v.v.vv>v.vv>.v
..>>.v..>>....>..vv.>.v..>>.>.>.>v.>..>..>..>v..v..v>v.v..>.>>.>...>>>....>.>>..vvv.v>v..v...vv..vv.vv>v..>v..v..v>v>.>...>v....>>.>.....vv
v.v...v.>>....v.>v.v....>.>.>...>>..vvv>..v>>v..>>.vvv.>v....>>..>>v>>>>v..vv>v.v..>v>>v>.>>v...>.>v>.>>.v..v>.>>vvv>..v.>..v......v>>>..>v
v>.>.vv.>>vv...>.>.v.vv.v>.v>v...vv.>vvv.>v...v.v..v>.vv>.>v.v...>.>..>v>.>..v..>.>v>..>.>v.>>>>>.>.v>.vvvv..v.vv.>.>...>.v>v.v....>.>>.>.v
>...v.v...vv........>>vv...vv.v>...>.>>>>>.>.v>>vv>..v.>v.>>v>>.v..>>..vv..>....>...v.v>.v.>..>..>>v...v.>>v...>....>.v..>.>>v.v.>.v>vv....
.vv..v>>>.v.v.vv.v>>..vv>.v>v>.>...v>v.......v....>>v..>.>.vv.v>.>.v.v..v..vv......>...>..v....>>>...v.v>..>>v....>.vv..v......v.>...v...v.
>.>....>.v>..>.>>.>v>..v.>.vv...........vvv>...>v.v>>...v>vv....v.>..>>>.>..>.v.v..>vv>..>v>vvvvv.v.>...v..>.vv.vv....>>v...v.v...>v...>.>.
.>.v...v>.v..>.>v....>..>>.v.v.v...>.>.vv..v.v.....>>..vv>.>.v..>..>.>>.>>>v..>.>..vv...>....>..v.v.v.>>vv>v..vv....v.v.vv.....v.>..v......
>..>>>v>>v>>..>>.>vvv..v..v....>v...>.v..v..v>>>..v.>...vvv..v>>v...>>>..>>..>.v..>>.>>.v>.........>..vv.>.v>>v.vv>.>.>.vv>>....v...>..>>v.
..>vv..>vvvv.v>.v.>..v.v..v.vv>>>vvv.v>.v.>>..v.v..v>>vv..vvv.....v>.>..v>vv....v..>.>.v>..>.....v.v.>>vvvv..v..v>v..v>v>>>>.v.>v...v..v>..
>>...>.....v.>...v>..>.vv.v....>.>.>v...>v>.>vv.v.vv.......v>.>.>.vvvv>....v.>..>v..>v.>>>...v>v>>........>>...v>.....>v>v..>.vv.>..v......
>v.v..>...>>...>...v.vv..>v>....v.v.>v.v.v..v>.>>v...>.v>...>.vv..vv.v..>....v>>.v..v>vv...>v.>....v.>..v>...v.v.>>>vv.>.>..>...>v.v.>vv.>>
>v.v>.vvv>...>>v>>>v>v...>..>.vv>.>vv>v....vvv........v>v.>v...>>v>.v..v.>...v>.>..>>..v.....v...>.v.vv>v.v....>.v..>vv.v.>>..vv>....v...v.
>>>>.>...>v.v..>>.>>.>>...v>v.v..>>...>v>>v..v...>..>.vv>>>...v.v.>.>v..v.v>>vvv.v>>>>.....v.>..>.v.vv.v>....>.v>....>.vv.>vv..v.v..vv.v..v
v.v>vv..vv...>.......vv.>v..v..v....>.>.>..v>.vv>.>.>.vv.>>v.v.>v>>..>.>>>.vv.>vv>v>.v.>vv.v>>vvvv>.vvv>>>...v>v.v>..>.....>.>>..v.>v......
..v.....>vv.v...>..v.v....>>>..v...>.......v.>....>.>..vvv>v>..vv>v>v...>..>>..v>.....>>.>.vv>...>vv.vv>>..........vvv.>vv...>>.v...v..v>>.
....>.v..>.>v.......v.vv>>>v.vvv.....v>>.vv>.>.>...v>.v.>vvvvv.>v>.v.v>>....>>...>....>.v...>.......>.>v>>vv..>...>......>....vv.v.v.>.v.>v
...>v>.v.>v..v>>.>.v>vvv.v>v>.v>v..>..v...v.v>.......>v.>..v.v.>...>>..>.>v.>>v..>.v>v...vv..vv...>v..>.>...>.v.>v.v....v.v..vv.>>....>v>..
...>.v...v.>..>..>v>v>v>.>>v..>....v.>.....>v>..>>>>.v..vv>v.v..vv>.v>>.vv..>>..vv.>>...v.>v.vvv.v>.>.>.>v.v>.>.v.>.....v..........v.>>..>v
v>.v>.v.>vv>>vvvv>.>v.>.>.>.>vv.vv>.>vv..>...>...v>v>v>...>....>....>>.>>....>v..vv.vv...>.v..>.v..>.v>v>v>.>..v..>...>..>v...>>.>>v>..>.>.
>v.>.v.>.vv>...v>.>..v.v.v...>v.>.>.>v>>>.....v..vv..vv...>.>>.>>>.v>...vv>v.v.>.>v....>>>vv.>.>>v.vv.vv>>v..v>>>>v..v.vv>vvvvv.v..v...v...
.>..>.>..v..>>>.v..v..>>.>...>..>>.v..v.>>.>>.>.>>v.>v.>.....>v.v..>..v.v>..>>>..v........>vv>.v.v.v.v....vvv.vv>..>>v...vv.>...>.v..v.v.v>
..>.v>..>..>v>.v.>v>>...vv>>>>..>.vv.v...vv.vv.>>>>.>>.....v.vv.v.>>v>>.>v.>>.>>>>.v>>vv>..v.....v>>.vv>..v.v.>..>v>..vv>...>.>v.>vv..>..v>
>v.v>.v...v>>.vv>.vv>v>.>vv...>v>.>v>.vvvvv....>.>.vv...>.....v..vvv>v..v.v.v.v>>vv.v...v....v.>..>.v.v..>..v>>..>v......v..>vv.v...v...>..
..>v>>v>>v.v....v.>>v.v.>.v.>>.vvv.v>v.>..>>>>.........>..v.vv>.vv>>.>v...>>>>vv....>>vv....>.v>v>v>v.....>.>>>.>.v>..>.......v.>>>>vvv.>.v
>>>>>vv...v.>.vvv...>...>.v..v..>....>>.v>v..v.v>...>>v.>.>.v>......>>>>>vvv.>.>.>vv...>>v..vvv...>v..v.v>v...v>v>..>>vv>v.....>...v>.v.vv.
.v...v.v>v...>.v.>..>v.v...v>...>v.v.>>...>>>>vv.v>>.>..>.>.v>..vv.v>vv....v>>>....>v>>v>.v.v.....v>v..>>...v>>v.>...v...v>v>vv..>>.v>>>v.v
.v..>>vv.>>>.>v..>..v.v>.>vv...>....vv>.>vv...>v>....v.vv.>........>......v.vv>...>vv.vv..v.v>v.>..v...>.vv>vvv..v......>.>.vv.v...>..vv...
.v.....>>..v.>>>>v..v>>>>.>>......vv.vv.....>.v.vv>>v>.>..>....v>..>>.>v..vv.>v.vv..v>........v>....>..v>v>v.v>>v..vv>.v.>.v....>.vvv...>>v
.>..v..v..v....>v.v>...v.vv>v>.v.v>>..>v.vvv>...>>.v...v.....>vv.>.v>...>>.>v>vv...v>.>v>v...vv>.....v...>.>>>.>v..>vv.vv.v>.v.vvv.vv>v>...
>>.v..>.v.v.>.vv..v.v..v..v.vv.v.vv.v>v.>.vv>..v>.>v>..v.>v.>........>>>.v.>v>....v.>........>>.v...v..>vv..>.vvv.vvv....vvv.>.v>.>>..>>.v.
...>...v.>>v>.vv>.vv>..>....vv..vvv....>.>..v>.>>..v....>.>>>.v>>vv.>....>.>.v..>>>.v>.>.>...vv.>..>..>..>..>>.>>>...>.>vv....>...>.>>>...>
.........vv>>>v.v>.>v>vvv>v>..>..v>>>..>>.v>>>.>......>.vv.....>.v.....>....>..v......v>..v..>...>....v.v>....>>.>.>v.vv..v.v.>..>v.>..>..>
v..v>......v.>....vv.>v...>.vv>>v.v.>.>..v>>vv.v.v>v..>.vv....>..vv....>>..v...vv..v.>vv.>...>..v.>...v..>v.>.v.vv.....v..>.vv.>.vvvv...>v>
..v..v>.>>v>.vvvv>.v.....>v>vv.>.>v...>.v....v.>vv...>>...vv.v..v.>v.vv..>..>.>..>v>.>v..vvv>.v..v.v>...vv.v>.v>.v>>..>v.v>vvvvv.>.....>v>.
v>.>.v.>..>>>..v>..vvv..v>>.>..>>>v....>v.>...>.v>...>....>>..v>v>...>>.....>>v..v>>.>.>>.>v......v.v.v>v.>.>.v>>.v>>>v>>>v....v>>..v.vv>.v
>..v....>.vv>v..>vv>>>.>vvv>v..vv>.>>...vv>v..>.vv.>>..>..>....>>.......v..........>...v>>v>.vv..>>.>..>.vv>..v>..>vv...vvv..>.v>.vv>.vvv.v
.>>.v....v...>..v.v>.>.>v>.>v.v..v>.v.v..>v>...v.v>..v>v...>...vvv.>.vv>v>...v.v..v...>>.>.v.vv..>>>>v.>v>v.v.v.>v...v.>v.>v.vvvvv.....v>v>
>>vv.v.>vv...>>v..v...>>..vv>.>v.>>.>v.......>>v>v.v>v.>.>..v.......v>>>v..>>>.>..>v..>vvv..>..>.>>v>>>..v.>.vv..v.>.v.>>>..>>v.>>..>>...>.
>>..v..>..>v....v....>vvvv>.v.>...v.v.>v.>vv....>.>>>.v>v>.....>>v>.>>>>vvvv.>vv>vv>.....>>vv>..>>....v..>v.>v.v>>v>vv>....>v.v>>.v>...v...
..>>..v>v.>...v>....>v.>...>...>...>..v.v..v>.>>..>.>v...>>.v.>>.v.v..v..>.v.>...>v.v>v>>>.>.vv.v>>.vv...>v>>>..v>.v...>>vvv.v..>..v....>..
v>v>.>vv.>>>>vvv>.>v>>..>..v>.>.vv>>v.v>>.v>>.v>>.>.......>>>v>.>>.>>v>...vv>vv..>>>.v>.v>..vvv..>...>...v>v>...vv>>.>.vv>>>.>.>v>....>>v>>
...>>v>>v.>..v.v..v.v>v>>>..>..vvv..vv>.v.....>.vv.vvv.....>vv>v.v>v...>vv..v..vv.>.vv>...v.v>.v>>v.vv....v...>v...>>.v>v.vvv>v>>v>....>...
>>v..v.vv.>..vv.>>>>..>v>vv..v..v.>>>.vv..v.v...>>......vv>.....vv..>..>....>......>v.>.....vv.>>v....>.v>>..>.>....vv..>v>.>>>>.v>v...>vv>
v.v>v>v....>v..>.v..>>...v.v.v..>>>.....>v......v....>>>..v....>.v.>>>v.v.v.>v>.>v.....>>vv>.>v..v...>v..>>>.>>v.v..>>.>.v....>v>>>v..>v>.v
>>v.....v>v...>>vv>>.v>.v>..>...>..>.>.v........v.>.vvv....v.>>v>..vv..v.v>vv>.>..v>>v>v.v.>v>..v>v....v....>.>.>v>..v.v>>v>.>.v.vvv.v..v.v
>..>..>>.>...v>>vv...v.v>..v..>vv..>.>..v>>>v>.....v>v.vv.>vv>vv>>...>....>.v.vv...v.....>.>.....vv.....v..>>.v.>v....vv>.v...v....v>.vv...
v.>..>.>..>>.....v.>>......v>vv>v.vv>.>>v.vv.>.>>.vv...v.v..>vv...v.vvvvv..v>v.....>v.v..>..v...>.v..vv>.v.v.>v..>.......v....vv...>vv.v>>>`
      .split("\n")
      .map((row) => row.split(""));
  const height = grid.length;
  const width = grid[0].length;

  let steps = 0;
  while (true) {
    steps++;
    let moves = 0;

    const nGrid = Array(height)
      .fill()
      .map(() => Array(width).fill("."));

    for (let i = 0; i < height; i++) {
      for (let j = 0; j < width; j++) {
        if (grid[i][j] === ">") {
          let t = j + 1;
          if (t === width) t = 0;
          if (grid[i][t] === ".") {
            grid[i][t] = ".";
            nGrid[i][t] = ">";
            moves++;
          } else {
            nGrid[i][j] = ">";
          }
        }
      }
    }

    for (let j = 0; j < width; j++) {
      for (let i = 0; i < height; i++) {
        if (grid[i][j] === "v") {
          let t = i + 1;
          if (t === height) t = 0;
          if (grid[t][j] !== "v" && nGrid[t][j] === ".") {
            nGrid[t][j] = "v";
            moves++;
          } else {
            nGrid[i][j] = "v";
          }
        }
      }
    }

    if (moves === 0) return steps;

    grid = nGrid;
    ctx.fillStyle = "#2e3440";
    ctx.fillRect(0, 0, c.width, c.height);
    for (let i = 0; i < height; i++) {
      for (let j = 0; j < width; j++) {
        const thing = grid[i][j];
        if (thing === ">") ctx.fillStyle = "#a3be8c";
        if (thing === "v") ctx.fillStyle = "#ebca8b";
        if (thing === ".") ctx.fillStyle = "#3b4252";
        ctx.fillText(grid[i][j], j * font_size, (i + 1) * font_size);
      }
    }
    await wait();
  }

  async function wait(time = WAIT) {
    return new Promise((res) => setTimeout(res, time));
  }
}

animate();
